<Window
    x:Class="TFOHelperRedux.Views.AddFishToMapWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cvt="clr-namespace:TFOHelperRedux.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:svc="clr-namespace:TFOHelperRedux.Services"
    Title="Добавление / Редактирование рыбы"
    Width="980"
    Height="750"
    Background="#FAFAFA"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">

    <Window.Resources>
        <cvt:FishCheckedConverter x:Key="FishCheckedConverter" />
        <cvt:StringToImageSourceConverter x:Key="ImgConverter" />
    </Window.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.5*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>

            <!--  🐟 Левая часть  -->
            <StackPanel Grid.Column="0" Margin="0,0,12,0">
                <Border
                    Padding="8"
                    Background="White"
                    BorderBrush="#DDD"
                    BorderThickness="1"
                    CornerRadius="6">
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,4"
                            FontWeight="Bold"
                            Text="Фото рыбы" />
                        <Image
                            x:Name="imgPreview"
                            Height="140"
                            Margin="0,4"
                            Source="{Binding SelectedFish.ImagePath, Converter={StaticResource ImgConverter}}"
                            Stretch="Uniform" />
                        <Button
                            Margin="0,6,0,0"
                            Padding="6"
                            Background="#4CAF50"
                            Foreground="White"
                            BorderBrush="#388E3C"
                            Click="ChooseImage_Click"
                            Content="Выбрать изображение" />
                    </StackPanel>
                </Border>

                <StackPanel Margin="0,10,0,0">
                    <TextBlock
                        Margin="0,0,0,4"
                        FontWeight="Bold"
                        Text="Название рыбы" />
                    <TextBox
                        x:Name="txtName"
                        Height="28"
                        FontSize="14" />
                </StackPanel>

                <StackPanel Margin="0,10,0,0" Orientation="Horizontal">
                    <StackPanel Width="120">
                        <TextBlock
                            Margin="0,0,0,4"
                            FontWeight="Bold"
                            Text="Крупная от (г)" />
                        <TextBox x:Name="txtLarge" Height="26" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="16,0,0,0">
                        <TextBlock
                            Margin="0,0,0,4"
                            FontWeight="Bold"
                            Text="Трофей от (г)" />
                        <TextBox x:Name="txtTrophy" Height="26" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Margin="0,10,0,0" Orientation="Horizontal">
                    <StackPanel Width="120">
                        <TextBlock
                            Margin="0,0,0,4"
                            FontWeight="Bold"
                            Text="Крючок мин." />
                        <TextBox x:Name="txtHookMin" Height="26" />
                    </StackPanel>
                    <StackPanel Width="120" Margin="16,0,0,0">
                        <TextBlock
                            Margin="0,0,0,4"
                            FontWeight="Bold"
                            Text="Крючок макс." />
                        <TextBox x:Name="txtHookMax" Height="26" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Margin="0,10,0,0">
                    <TextBlock
                        Margin="0,0,0,4"
                        FontWeight="Bold"
                        Text="Температура (°C)" />
                    <StackPanel Orientation="Horizontal">
                        <TextBox
                            x:Name="txtTempMin"
                            Width="60"
                            Margin="0,0,8,0" />
                        <TextBlock VerticalAlignment="Center" Text="–" />
                        <TextBox
                            x:Name="txtTempMax"
                            Width="60"
                            Margin="8,0,0,0" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Margin="0,10,0,0">
                    <TextBlock
                        Margin="0,0,0,4"
                        FontWeight="Bold"
                        Text="Комментарий" />
                    <TextBox
                        x:Name="txtComment"
                        Height="80"
                        AcceptsReturn="True"
                        TextWrapping="Wrap"
                        VerticalScrollBarVisibility="Auto" />
                </StackPanel>
            </StackPanel>

            <!--  📋 Правая часть  -->
            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                <!-- 🕒 Время суток -->
                <TextBlock Margin="0,0,0,6" FontWeight="Bold" Text="Время суток" />
                <WrapPanel Margin="0,0,0,10">
                    <CheckBox x:Name="cbMorning" Margin="4" Content="Утро"  Tag="1"
                              Loaded="TimeOfDay_Loaded"
                              Checked="TimeOfDay_Checked" Unchecked="TimeOfDay_Checked"/>
                    <CheckBox x:Name="cbDay"     Margin="4" Content="День"  Tag="2"
                              Loaded="TimeOfDay_Loaded"
                              Checked="TimeOfDay_Checked" Unchecked="TimeOfDay_Checked"/>
                    <CheckBox x:Name="cbEvening" Margin="4" Content="Вечер" Tag="3"
                              Loaded="TimeOfDay_Loaded"
                              Checked="TimeOfDay_Checked" Unchecked="TimeOfDay_Checked"/>
                    <CheckBox x:Name="cbNight"   Margin="4" Content="Ночь"  Tag="4"
                              Loaded="TimeOfDay_Loaded"
                              Checked="TimeOfDay_Checked" Unchecked="TimeOfDay_Checked"/>
                </WrapPanel>
                <!--  🏷 Категории  -->
                <TextBlock
                    Margin="0,8,0,4"
                    FontWeight="Bold"
                    Text="Категории" />
                <ItemsControl x:Name="CategoriesList" ItemsSource="{Binding Categories}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <CheckBox
                                Margin="4"
                                Content="{Binding Name}"
                                IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!--  🍞 Прикормки  -->
                <TextBlock
                    Margin="10,10,0,4"
                    FontWeight="Bold"
                    Text="Прикормки" />
                <ScrollViewer Height="100" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="FeedsList" ItemsSource="{Binding Feeds}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Margin="4"
                                    Content="{Binding Name}"
                                    IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl></ScrollViewer>

                <!--  💧 Дипы  -->
                <TextBlock
                    Margin="10,10,0,4"
                    FontWeight="Bold"
                    Text="Дипы" />
                    <Border BorderThickness="1" CornerRadius="3">
                        <ScrollViewer Height="100" VerticalScrollBarVisibility="Auto">
                            <ItemsControl x:Name="DipsList" ItemsSource="{Binding Dips}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                <CheckBox
                                    Margin="4"
                                    Content="{Binding Name}"
                                    IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Border>
                

                <!--  🪱 Наживки  -->
                <TextBlock
                    Margin="10,10,0,4"
                    Padding="4"
                    FontWeight="Bold"
                    Text="Наживки" />
                    <Border BorderThickness="1" CornerRadius="4">
                        <ScrollViewer Height="200" VerticalScrollBarVisibility="Auto">
                            <ItemsControl ItemsSource="{Binding Lures}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                <CheckBox
                                    Margin="4"
                                    Content="{Binding Name}"
                                    IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Border>
                
                <!--  🔘 Кнопки  -->
                <StackPanel
                    Margin="0,16,0,0"
                    HorizontalAlignment="Right"
                    Orientation="Horizontal">
                    <Button
                        Width="120" Height="34"
                        Margin="0,0,8,0"
                        Background="#2196F3"
                        Foreground="White"
                        BorderBrush="Black"
                        Click="Save_Click"
                        Content="💾 Сохранить" />
                    <Button
                        Width="100" Height="34"
                        Margin="0, 0, 8, 0"
                        Background="RosyBrown"
                        Foreground="White"
                        BorderBrush="Black"
                        Click="Cancel_Click"
                        Content="❌ Отмена" />
                </StackPanel>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
