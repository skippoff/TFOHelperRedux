<Window x:Class="TFOHelperRedux.Views.MapPreviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Карта водоёма"
        Width="900"
        Height="900"
        ResizeMode="NoResize"
        WindowStartupLocation="Manual"
        Background="Black">

    <DockPanel>
        <!-- Меню -->
        <Menu DockPanel.Dock="Top" Background="#222" Foreground="White" FontSize="13">
            <MenuItem Header="_Меню">
                <MenuItem Header="О программе"
                          Click="About_Click"/>
                <Separator/>
                <MenuItem x:Name="miCalibrate"
                          Header="Режим калибровки карт"
                          IsCheckable="True"
                          Visibility="Collapsed"
                          Checked="CalibMode_Checked"
                          Unchecked="CalibMode_Unchecked"/>

            </MenuItem>
        </Menu>
        <Grid>
            <!-- Контейнер карты -->
            <Viewbox Stretch="Uniform">
                <Grid>
                    <!-- Картинка карты -->
                    <Image x:Name="MapImage"
                   Stretch="Fill"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"/>

                    <!-- Поверх – слой для маркера -->
                    <Canvas x:Name="Overlay"
                    IsHitTestVisible="True"
                    Background="Transparent"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                        <Ellipse x:Name="Marker"
                         Width="16" Height="16"
                         Fill="Red"
                         Stroke="White"
                         StrokeThickness="2"
                         Opacity="0.9">
                            <Ellipse.RenderTransform>
                                <ScaleTransform x:Name="MarkerScale" ScaleX="1" ScaleY="1" CenterX="8" CenterY="8"/>
                            </Ellipse.RenderTransform>

                            <Ellipse.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                            <DoubleAnimation Storyboard.TargetName="MarkerScale"
                                                     Storyboard.TargetProperty="ScaleX"
                                                     From="1.0" To="1.3"
                                                     Duration="0:0:0.8"
                                                     AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="MarkerScale"
                                                     Storyboard.TargetProperty="ScaleY"
                                                     From="1.0" To="1.3"
                                                     Duration="0:0:0.8"
                                                     AutoReverse="True"/>
                                            <DoubleAnimation Storyboard.TargetName="Marker"
                                                     Storyboard.TargetProperty="Opacity"
                                                     From="0.9" To="0.4"
                                                     Duration="0:0:0.8"
                                                     AutoReverse="True"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Ellipse.Triggers>

                            <Ellipse.ToolTip>
                                <ToolTip Background="#333"
                                 Foreground="White"
                                 FontSize="13"
                                 Padding="6"
                                 Placement="Mouse"
                                 HasDropShadow="True">
                                    <StackPanel>
                                        <TextBlock Text="{Binding CoordsInfo}" FontWeight="Bold" Foreground="SteelBlue"/>
                                        <TextBlock Text="{Binding FishName}" FontSize="12" Foreground="#CCC"/>
                                    </StackPanel>
                                </ToolTip>
                            </Ellipse.ToolTip>

                        </Ellipse>
                    </Canvas>
                </Grid>
            </Viewbox>
        </Grid>
    </DockPanel>
</Window>