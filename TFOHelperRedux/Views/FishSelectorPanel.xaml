<UserControl x:Class="TFOHelperRedux.Views.FishSelectorPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:TFOHelperRedux.Converters">

    <UserControl.Resources>
        <conv:StringToImageSourceConverter x:Key="ImgConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <!-- 🔍 Поиск -->
        <TextBox Grid.Row="0"
                 Margin="4"
                 Height="28"
                 Padding="4"
                 Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>

        <!-- 🐟 Список рыб -->
        <ListBox Grid.Row="1"
                 x:Name="FishList"
                 ItemsSource="{Binding FilteredFishes}"
                 SelectedItem="{Binding SelectedFish, Mode=TwoWay}"
                 Background="Transparent"
                 BorderThickness="0"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 HorizontalContentAlignment="Stretch"
                 ItemContainerStyle="{StaticResource RoundedCardStyle}">

            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel IsItemsHost="True" Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Width="110" Height="110" CornerRadius="6" BorderBrush="#DDD" BorderThickness="1" Margin="4">
                        <StackPanel>
                            <Image Source="{Binding ImagePath, Converter={StaticResource ImgConverter}}"
                                   Height="60" Stretch="Uniform"/>
                            <TextBlock Text="{Binding Name}"
                                       HorizontalAlignment="Center"
                                       TextWrapping="Wrap"
                                       FontSize="12"
                                       Margin="0,4,0,0" />
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox>
    </Grid>
</UserControl>
