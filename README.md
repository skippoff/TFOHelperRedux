# TFOHelperRedux

**TFOHelperRedux** — это WPF-приложение на .NET 8.0, помощник для рыболовных игр. Приложение помогает управлять информацией о рыбе, приманках, картах и точках лова.

## Основные возможности

- 🐟 **Каталог рыб** — просмотр и редактирование данных о рыбах (вес, крючки, температура, теги)
- 🗺️ **Карты локаций** — управление картами и точками лова (Catch Points)
- 🎣 **Приманки** — управление прикормками (Feeds), компонентами (FeedComponents), дипами (Dips) и воблерами (Lures)
- 📝 **Рецепты** — создание и редактирование рецептов прикормок
- 🏷️ **Теги** — категоризация рыб и приманок
- 💾 **Импорт/экспорт** — точек лова в JSON-формате
- 🎨 **Темы оформления** — поддержка светлой/тёмной темы Material Design 3
- 📊 **Графики** — визуализация интенсивности клёва по часам (LiveCharts)
- 📜 **Скроллбары** — современные тонкие скроллбары с анимацией
- ℹ️ **О программе** — модальное окно с информацией о приложении

## Технологический стек

| Компонент | Технология |
|-----------|------------|
| **Фреймворк** | .NET 8.0 (Windows) |
| **UI** | WPF (Windows Presentation Foundation) |
| **UI Library** | MaterialDesignThemes 5.3.0 |
| **Charts** | LiveCharts.Wpf 0.9.7, LiveChartsCore.SkiaSharpView.WPF 2.0.0-rc5.4 |
| **Архитектура** | MVVM + DI + Service Layer |
| **Язык** | C# 12 |
| **Данные** | JSON (System.Text.Json) |
| **Логирование** | Serilog |

## Сборка и запуск

### Требования

- .NET 8.0 SDK
- Visual Studio 2022 (с поддержкой WPF)
- Windows 10/11

### Команды сборки

```bash
# Сборка проекта (Debug)
dotnet build TFOHelperRedux.sln

# Сборка (Release)
dotnet build TFOHelperRedux.sln -c Release

# Запуск приложения
dotnet run --project TFOHelperRedux\TFOHelperRedux.csproj

# Публикация
dotnet publish TFOHelperRedux\TFOHelperRedux.csproj -c Release -o ./publish
```

## Структура проекта

```
TFOHelperRedux/
├── TFOHelperRedux.sln
├── TFOHelperRedux/
│   ├── App.xaml(.cs)
│   ├── TFOHelperRedux.csproj
│   ├── Models/           # Модели данных
│   ├── ViewModels/       # ViewModel (логика представления)
│   ├── Views/            # XAML-представления
│   ├── Services/         # Сервисы (DI, Data, Business, UI, State)
│   ├── Converters/       # WPF-конвертеры
│   ├── Helpers/          # Вспомогательные классы
│   └── Themes/           # Стили приложения
```

## Архитектура

### MVVM + DI + Service Layer

- **Models** — POCO-классы с `INotifyPropertyChanged`
- **ViewModels** — наследуются от `BaseViewModel`, содержат команды и координируют сервисы
- **Views** — XAML-файлы с привязками к ViewModel
- **Services** — бизнес-логика по подпапкам:
  - **DI** — регистрация и получение сервисов
  - **Data** — работа с данными (загрузка, сохранение, хранилище)
  - **Business** — бизнес-логика (CRUD, фильтрация, навигация)
  - **UI** — UI-операции (MessageBox, подтверждения)
  - **State** — состояние приложения (выбор рыбы, карты, точки)

## Последние изменения (февраль 2026)

### 27 февраля
- 🎨 Природная палитра цветов (вместо стандартной Material Design)
  - Светлая тема: #F5F0E8 (фон), #4A7C59 (акцент), #C47A3A (оранжевый)
  - Тёмная тема: #1A1F1A (фон), #5E9E72 (акцент), #D4924A (оранжевый)
- ♻️ Рефакторинг ThemeService
  - Удалены захардкоженные цвета из C# кода
  - Переключение тем через замену ResourceDictionary
  - Все цвета живут только в .xaml файлах
- 🔘 Обновлены цвета кнопок (EditButton, ExportButton, ImportButton, AboutButton, SettingsButton, InfoButton, RefreshButton, OkButton, CancelButton)

### 26 февраля
- ✨ Окно "О программе" в стиле Material Design
- 🎨 Приглушённая светлая тема (комфорт для глаз)
- 🔧 Горизонтальная компоновка секций ("Лучшие наживки"/"Может клевать", "Прикормки"/"Рецепты")
- 🖱️ Прокрутка колёсиком во всех ScrollViewer
- ❌ Удалён двойной клик по карточкам точек лова

### 23 февраля
- Очистка Fishes.json (283 рыбы, массивы связей пусты)
- Удаление BaitRecipes.json (рецепты создаются через интерфейс)
- Исправление графика клёва при переключении водоёмов
- Современные стили для TextBox и ComboBox
- Удаление рецептов через UI (полное удаление из JSON)

### 20 февраля
- Добавлены MaterialDesignThemes 5.3.0 и LiveCharts
- Рефакторинг FishViewModel (623 → 326 строк)
- Оптимизация производительности (21 оптимизация)
- Виртуализация для больших коллекций

## Глоссарий

| Термин | Описание |
|--------|----------|
| **Feed** | Прикормка (готовая смесь) |
| **FeedComponent** | Компонент прикормки (ингредиент для крафта) |
| **Dip** | Дип (жидкий ароматизатор) |
| **Lure** | Воблер/искусственная приманка |
| **CatchPoint** | Точка лова на карте (координаты X,Y) |
| **BiteIntensity** | Интенсивность клёва по часам (массив 24 значения) |
| **RecipeRank** | Ранг рецепта: Normal, Top, Deprecated, Experimental |

## Лицензия

© Skipoff, 2025

Основан на TFOHelper (автор PilGrim).
